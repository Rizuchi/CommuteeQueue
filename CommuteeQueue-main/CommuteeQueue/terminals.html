<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terminals | CommuteeQueue</title>
  <link rel="icon" type="image/x-icon" href="image/logo.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/x-icon" href="image/logo.png">
</head>
<body>
  
  <section id="header">
    <a href="index.html" class="logo-container">
      <img src="image/logo.png" class="logo" alt="" width="60px">
      <img src="image/user.svg" alt="" class="user-profile" width="20px">
      <span class="username-placeholder">User: CommuteeQueue User</span>
    </a>

    <div>
      <ul id="navbar">
        <li><a href="index.html">Home</a></li>
        <li><a class="active" href="terminals.html">Terminal</a></li>
        <li><a href="About Us.html">About us</a></li>
        <li><a href="help.html">Help</a></li>         
      </ul>
    </div>
  </section>

  <!-- Search Bar Section -->
  <section id="search-section">
    <div class="search-container">
      <input type="text" placeholder="Search terminal or destination">
      <button><i class="fa-solid fa-magnifying-glass"></i></button>
    </div>
  </section>

  <!-- Terminal Cards -->
  <section id="terminal-cards"></section>

  <!-- Popup Window -->
  <div id="popup-window" class="popup">
    <div class="popup-content">
      <span class="close-btn">&times;</span>
      <div class="map-placeholder">MAP IMG PLACEHOLDER</div>
      <div class="details">
        <h3>Terminal Map:</h3> <span id="popup-terminal"></span>
        <h3>Route to the Terminal:</h3> <span id="popup-route">-</span>
      </div>
      <div class="notify-section">
        <button id="notify-btn">NOTIFY ME</button>
        <div id="timer-display" class="timer-display"></div>
        <div class="timer-controls">
          <button class="set-timer" data-minutes="5">5 min</button>
          <button class="set-timer" data-minutes="10">10 min</button>
          <button class="set-timer" data-minutes="15">15 min</button>
          <button id="stop-timer">Stop</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <section id="footer" class="section-p1">
    <div class="col">
        <img class="logo" src="image/logo.png" alt="" width="60px">
        <h4>Contact</h4>
        <p><strong>Address:</strong> Balanga, Bataan</p>
        <p><strong>Phone:</strong> 0991-Queue</p>
        <p><strong>Hours:</strong> Open 25/8</p>
    </div>
    <div class="col">
        <h4>About</h4>
        <a href="#">About Us</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms & Conditions</a>
        <a href="#">Contact Us</a>
    </div>
    <div class="col install">
        <h4>Install App</h4>
        <p>From App Store or Google Play</p>
        <p>Secured Payment Gateways</p>
    </div>
    <div class="copyright">
        <p>© 2025, CommuteeQueue - HTML CSS E-commerce</p>
    </div>
  </section>

  <script>
  // === ROUTE, VEHICLE, TERMINAL DATA ===
  const destinations = [
    "DINALUPIHAN","BAGAC","LIMAY","LAMAO","ORANI","ABUCAY","BNAS","MARIVELES",
    "MORONG","OLONGAPO","OLONGAPO via ROMAN HIGHWAY","CUBAO","PAMPANGA","AVENIDA",
    "SAN FERNANDO","STA. CRUZ","STO DOMINGO","STA. RITA","ARAYAT","STA. ANA",
    "CALOOCAN","CUBAO","LA UNION","URDANETA","SISON","CARMEN","PANIQUI","GERONA",
    "DAU","TARLAC SIESTA","BASA","SAN SIMON"
  ];

  const vehicles = ["Bus", "Jeep", "Mini Bus", "E-Jeep"];
  const terminals = ["BALANGA COMPLEX TERMINAL", "VICTORY LINER BALANGA", "BATAAN TRANSIT BALANGA"];

  const cardsContainer = document.getElementById("terminal-cards");
  const cardData = [];

  // === Random departure time ===
  function randomDepartureTime() {
    const now = new Date();
    return new Date(now.getTime() + Math.floor(Math.random() * 120) * 1000);
  }

  // === Assign terminal based on vehicle type ===
  function assignTerminal(vehicle) {
    if (vehicle === "Bus") {
      const r = Math.random();
      if (r < 0.7) return terminals[0];
      else if (r < 0.85) return terminals[1];
      else return terminals[2];
    }
    return terminals[0];
  }

  // === Generate Cards ===
  function generateCards(count = 204) {
    const shuffled = [...destinations].sort(() => 0.5 - Math.random());
    for (let i = 0; i < count; i++) {
      const dest = shuffled[i % shuffled.length];
      const vehicle = vehicles[Math.floor(Math.random() * vehicles.length)];
      const terminal = assignTerminal(vehicle);
      const departureTime = randomDepartureTime();

      const card = document.createElement("div");
      card.classList.add("card");
      card.innerHTML = `
        <button class="subscribe-btn"><i class="fa-solid fa-bell"></i></button>
        <h3>${terminal} — ${dest}</h3>
        <p><strong>Vehicle Type:</strong> ${vehicle}</p>
        <p><strong>Departure:</strong> <span class="departure-countdown" data-index="${i}"></span></p>
        <p class="status boarding">Boarding</p>
      `;
      cardsContainer.appendChild(card);
      cardData.push({ element: card, departureTime, terminal });
    }
  }

  generateCards(204);

  // === Live Countdown ===
  function updateCountdowns() {
    const now = new Date();
    cardData.forEach(({ element, departureTime }) => {
      const countdownEl = element.querySelector(".departure-countdown");
      const statusEl = element.querySelector(".status");

      let diff = (departureTime - now) / 1000;
      if (diff <= 0) {
        countdownEl.textContent = "Departed";
        statusEl.textContent = "Departed";
        statusEl.classList.remove("waiting");
        statusEl.classList.add("departed");
        return;
      }

      const hrs = Math.floor(diff / 3600);
      diff %= 3600;
      const mins = Math.floor(diff / 60);
      const secs = Math.floor(diff % 60);

      countdownEl.textContent = ` in ${hrs.toString().padStart(2, "0")}:${mins
        .toString()
        .padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;
    });
  }

  setInterval(updateCountdowns, 1000);
  updateCountdowns();

  // === POPUP LOGIC ===
  const popup = document.getElementById("popup-window");
  const closeBtn = document.querySelector(".close-btn");
  const routeEl = document.getElementById("popup-route");
  const terminalEl = document.getElementById("popup-terminal");
  const mapPlaceholder = document.querySelector(".map-placeholder");

  let timerInterval;
  let remainingTime = 0;

  document.addEventListener("click", e => {
    if (e.target.closest(".card")) {
      const card = e.target.closest(".card");
      const headerText = card.querySelector("h3").innerText;
      const [terminalName, destination] = headerText.split(" — ");
      routeEl.textContent = destination;
      terminalEl.textContent = terminalName;

      // === Set terminal image dynamically ===
      let imgSrc = "";
      if (terminalName.includes("BALANGA COMPLEX")) imgSrc = "image/complex.png";
      else if (terminalName.includes("VICTORY")) imgSrc = "image/victoryliner.png";
      else if (terminalName.includes("BATAAN TRANSIT")) imgSrc = "image/bataantransit.png";
      else imgSrc = "image/complex.png";

      mapPlaceholder.innerHTML = `<img src="${imgSrc}" alt="${terminalName}" style="width:100%;border-radius:10px;box-shadow:0 0 8px rgba(0,0,0,0.3);">`;

      popup.style.display = "flex";
    }
  });

  closeBtn.addEventListener("click", () => {
    popup.style.display = "none";
    clearInterval(timerInterval);
    document.getElementById("timer-display").textContent = "";
  });

  // === NOTIFY TIMER ===
  const notifyBtn = document.getElementById("notify-btn");
  const timerDisplay = document.getElementById("timer-display");
  const timerButtons = document.querySelectorAll(".set-timer");
  const stopBtn = document.getElementById("stop-timer");

  notifyBtn.addEventListener("click", () => {
    if (remainingTime > 0) {
      startTimer();
    } else {
      alert("Set a timer first!");
    }
  });

  timerButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      remainingTime = parseInt(btn.getAttribute("data-minutes")) * 60;
      timerDisplay.textContent = `Timer set for ${btn.getAttribute("data-minutes")} minutes`;
    });
  });

  stopBtn.addEventListener("click", () => {
    clearInterval(timerInterval);
    timerDisplay.textContent = "Timer stopped.";
    remainingTime = 0;
  });

  function startTimer() {
    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      const minutes = Math.floor(remainingTime / 60);
      const seconds = remainingTime % 60;
      timerDisplay.textContent = `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
      if (remainingTime <= 0) {
        clearInterval(timerInterval);
        alert("Time's up!");
        timerDisplay.textContent = "";
      }
      remainingTime--;
    }, 1000);
  }

  // === Search Filter ===
  const searchInput = document.querySelector(".search-container input");
  searchInput.addEventListener("keyup", function () {
    const searchValue = searchInput.value.toLowerCase();
    const cards = document.querySelectorAll(".card");
    cards.forEach(card => {
      const text = card.innerText.toLowerCase();
      card.style.display = text.includes(searchValue) ? "block" : "none";
    });
  });
</script>




</body>
</html>